import{u as C,r as p,c as S,a as s,b as o,d as a,w as c,e as v,f as U,o as q}from"./index-CPnQyNTi.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as l}from"./function-call-B6h5_xHM.js";import"./mount-component-DwzMd02N.js";const L={class:"register-page"},N={class:"register-container"},P={class:"register-logo"},R={class:"submit-btn"},T={__name:"Register",setup(j){const u=U(),_=C(),i=p(""),r=p(""),d=p(""),g=()=>r.value===d.value,f=async()=>{l({type:"loading",message:"注册中...",forbidClick:!0,duration:0});try{const t=await _.register({username:i.value,password:r.value});t.success?(l({type:"success",message:t.message}),u.push("/")):l({type:"fail",message:t.message})}catch{l({type:"fail",message:"注册失败，请稍后再试"})}},b=()=>{u.back()},w=()=>{u.push("/login")};return(t,e)=>{const y=a("van-nav-bar"),V=a("van-image"),m=a("van-field"),k=a("van-cell-group"),h=a("van-button"),x=a("van-form");return q(),S("div",L,[s(y,{title:"用户注册","left-arrow":"",onClickLeft:b,fixed:""}),o("div",N,[o("div",P,[s(V,{width:"80",height:"80",src:"https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg",round:""}),e[3]||(e[3]=o("h2",null,"新闻资讯",-1))]),s(x,{onSubmit:f,class:"register-form"},{default:c(()=>[s(k,{inset:""},{default:c(()=>[s(m,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value=n),name:"username",label:"用户名",placeholder:"请输入用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),s(m,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),type:"password",name:"password",label:"密码",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),s(m,{modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=n=>d.value=n),type:"password",name:"confirmPassword",label:"确认密码",placeholder:"请再次输入密码",rules:[{required:!0,message:"请确认密码"},{validator:g,message:"两次密码不一致"}]},null,8,["modelValue","rules"])]),_:1}),o("div",R,[s(h,{round:"",block:"",type:"primary","native-type":"submit",size:"large"},{default:c(()=>[...e[4]||(e[4]=[v(" 注册 ",-1)])]),_:1})]),o("div",{class:"login-link"},[e[5]||(e[5]=v(" 已有账号？",-1)),o("span",{onClick:w},"去登录")])]),_:1})])])}}},D=B(T,[["__scopeId","data-v-39644922"]]);export{D as default};
