import{i as F,c,a as l,p as b,d as i,q as v,F as x,l as B,f as D,o as a,w as L,b as s,s as N,t as r}from"./index-CPnQyNTi.js";import{u as A}from"./favorite-arX0ddpb.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as u}from"./function-call-Be3urBny.js";import"./mount-component-DwzMd02N.js";const T={class:"favorite-container"},V={key:0,class:"favorite-list"},$={class:"news-item"},R={key:0,class:"news-image"},q=["src","alt"],z={class:"news-info"},E={class:"news-title"},I={class:"news-meta"},M={__name:"Favorite",setup(j){const _=D(),o=A(),d=()=>{_.back()},m=e=>{_.push(`/news/detail/${e}`)},p=async e=>{(await o.removeFavoriteApi(e)).success&&o.removeFavorite(e)},f=e=>{u({title:"提示",message:"确定要删除这条收藏吗？",showCancelButton:!0}).then(n=>{n==="confirm"&&p(e)})},h=async()=>{u({title:"提示",message:"确定要清空所有收藏吗？",showCancelButton:!0}).then(async e=>{if(e==="confirm"){const n=await o.clearFavoritesApi();(!n||!n.success)&&console.log("清空收藏列表")}})};return F(async()=>{try{const e=await o.getFavoriteListApi();(!e||!e.success)&&console.log("从本地存储加载收藏列表")}catch{o.loadFavorites()}}),(e,n)=>{const g=i("van-nav-bar"),k=i("van-cell"),w=i("van-button"),C=i("van-empty");return a(),c("div",T,[l(g,{title:"我的收藏","left-text":"返回","left-arrow":"",onClickLeft:d,"right-text":"清空",onClickRight:h,fixed:""}),v(o).getFavorites.length?(a(),c("div",V,[(a(!0),c(x,null,B(v(o).getFavorites,t=>(a(),c("div",{class:"favorite-item",key:t.id},[l(k,{onClick:y=>m(t.id),border:!1},{title:L(()=>[s("div",$,[t.image?(a(),c("div",R,[s("img",{src:t.image,alt:t.title},null,8,q)])):N("",!0),s("div",z,[s("div",E,r(t.title),1),s("div",I,[s("span",null,r(t.author),1),s("span",null,r(t.publishTime),1),s("span",null,"收藏时间: "+r(t.favoriteTime),1)])])])]),_:2},1032,["onClick"]),l(w,{class:"delete-btn",type:"danger",size:"mini",icon:"cross",onClick:y=>f(t.id)},null,8,["onClick"])]))),128))])):(a(),b(C,{key:1,description:"暂无收藏内容"}))])}}},P=S(M,[["__scopeId","data-v-ac892b87"]]);export{P as default};
